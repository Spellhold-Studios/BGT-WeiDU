BEGIN ~harbor~

IF WEIGHT #4 ~NumTimesTalkedTo(0)~ THEN BEGIN 0
  SAY @7712
  IF ~ReactionGT(LastTalkedToBy,HOSTILE_UPPER)~ THEN REPLY @7722 GOTO 1
  IF ~~ THEN REPLY @7723 GOTO 6
  IF ~~ THEN REPLY @7724 GOTO 5
  IF ~ReactionLT(LastTalkedToBy,NEUTRAL_LOWER)~ THEN REPLY @7725 GOTO 4
END

IF ~~ THEN BEGIN 1
  SAY @7713
  IF ~~ THEN REPLY @7726 GOTO 2
  IF ~~ THEN REPLY @7727 GOTO 3
  IF ~~ THEN REPLY @7728 GOTO 4
  IF ~~ THEN REPLY @7729 GOTO 5
END

IF ~~ THEN BEGIN 2
  SAY @7714
  IF ~~ THEN UNSOLVED_JOURNAL @310282 EXIT
END

IF ~~ THEN BEGIN 3
  SAY @7715
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 4
  SAY @7716
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 5
  SAY @7717
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 6
  SAY @7718
  IF ~~ THEN REPLY @7730 GOTO 7
  IF ~~ THEN REPLY @7731 GOTO 8
  IF ~~ THEN REPLY @7732 GOTO 8
END

IF ~~ THEN BEGIN 7
  SAY @7719
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 8
  SAY @7720
  IF ~~ THEN EXIT
END

IF WEIGHT #2 ~PartyHasItem("MISC55")~ THEN BEGIN 9
  SAY @7721
  IF ~~ THEN DO ~SetGlobal("EltanMove","GLOBAL",1)
SetGlobal("BroughtEltan","GLOBAL",1)
TakePartyItem("MISC55")
ActionOverride("Eltan2",SetNumTimesTalkedTo(100))
AddexperienceParty(2500)
EscapeArea()~ EXIT
END

IF WEIGHT #5 ~Global("BroughtEltan","GLOBAL",0)~ THEN BEGIN 10
  SAY @7733
  IF ~~ THEN EXIT
END

IF WEIGHT #3 ~Global("BroughtEltan","GLOBAL",1)~ THEN BEGIN 11
  SAY @7734
  IF ~~ THEN EXIT
END

IF WEIGHT #0 ~StateCheck(Myself,STATE_CHARMED)~ THEN BEGIN 12
  SAY @7735
  IF ~~ THEN UNSOLVED_JOURNAL @310283 EXIT
END

IF ~~ THEN BEGIN 13
  SAY @9266
  IF ~~ THEN EXIT
END
