BEGIN ~taloun~

IF ~Global("Kaishas1","GLOBAL",0)
Global("TalDone","GLOBAL",0)
!Dead("karoug")~ THEN BEGIN 0
  SAY @21192
  IF ~~ THEN EXIT
END

IF ~Global("Kaishas1","GLOBAL",1)
Global("TalDone","GLOBAL",0)
!Dead("karoug")~ THEN BEGIN 1
  SAY @21193
  IF ~~ THEN REPLY @21217 GOTO 2
  IF ~ReactionLT(LastTalkedToBy,FRIENDLY_LOWER)~ THEN REPLY @21219 GOTO 3
  IF ~~ THEN REPLY @21220 GOTO 5
  IF ~ReactionGT(LastTalkedToBy,NEUTRAL_UPPER)~ THEN REPLY @21231 GOTO 4
END

IF ~~ THEN BEGIN 2
  SAY @21195
  IF ~ReactionLT(LastTalkedToBy,FRIENDLY_LOWER)~ THEN REPLY @21221 GOTO 7
  IF ~~ THEN REPLY @21222 GOTO 5
  IF ~ReactionGT(LastTalkedToBy,NEUTRAL_UPPER)~ THEN REPLY @21232 GOTO 4
END

IF ~~ THEN BEGIN 3
  SAY @21198
  IF ~~ THEN DO ~SetGlobal("TalDone","GLOBAL",1)~ EXIT
END

IF ~~ THEN BEGIN 4
  SAY @21200
  IF ~~ THEN DO ~SetGlobal("TalDone","GLOBAL",1)~ UNSOLVED_JOURNAL @310665 EXIT
END

IF ~~ THEN BEGIN 5
  SAY @21201
  IF ~~ THEN GOTO 6
END

IF ~~ THEN BEGIN 6
  SAY @21202
  IF ~~ THEN REPLY @21224 GOTO 8
  IF ~~ THEN REPLY @21226 GOTO 9
  IF ~~ THEN REPLY @21227 GOTO 3
END

IF ~~ THEN BEGIN 7
  SAY @21204
  IF ~~ THEN EXIT
END

IF ~~ THEN BEGIN 8
  SAY @21206
  IF ~ReactionLT(LastTalkedToBy,FRIENDLY_LOWER)~ THEN REPLY @21228 UNSOLVED_JOURNAL @310666 GOTO 3
  IF ~~ THEN REPLY @21229 GOTO 9
  IF ~~ THEN REPLY @21230 GOTO 10
  IF ~ReactionGT(LastTalkedToBy,NEUTRAL_UPPER)~ THEN REPLY @21233 GOTO 4
END

IF ~~ THEN BEGIN 9
  SAY @21207
  IF ~~ THEN GOTO 10
END

IF ~~ THEN BEGIN 10
  SAY @21211
  IF ~~ THEN DO ~SetGlobal("TalDone","GLOBAL",1)~ EXIT
END

IF ~Global("TalDone","GLOBAL",1)
!Dead("karoug")
Global("Kaishas1","GLOBAL",1)~ THEN BEGIN 11
  SAY @21212
  IF ~~ THEN EXIT
END

IF ~Dead("karoug")~ THEN BEGIN 12
  SAY @21213
  IF ~~ THEN EXIT
END
